# Organizations API

Небольшое API-приложение для работы с организациями, зданиями и видами деятельности. (выполненное Тех.задание, адаптировано под "прод-версию")

------------------------------------

## Стек
- Python 3.11
- FastAPI
- SQLAlchemy
- Pydantic
- MySQL 8
- Docker / Docker Compose

------------------------------------

## Функциональность
- Слои архитектуры:
  * core - конфигурация приложения
  * db - подключение к базе и сессии
  * repositories - доступ к данным
  * services - бизнес-логика
  * api - зависимости и маршруты FastAPI
- Получение организаций:
  - по адресу здания
  - по ID организации
  - по имени
  - по радиусу относительно точки
  - по виду деятельности (с учётом дерева)
- Иерархическая модель деятельностей (до 3 уровней вложенности)
- Доступ к API по статическому API-ключу
- Все ответы в формате JSON
- Эндпоинт `/health` для проверки работоспособности сервиса и БД

------------------------------------

## Требования
- Docker
- Docker Compose

------------------------------------

### Установка и запуск

### 1. Клонировать репозиторий

```bash
git clone git@github.com:mindrusher/organizations-api.git
cd organizations-api
```

### 2. Собрать и запустить контейнеры

```bash
docker-compose up --build
```

### 2. Документация API (Swagger UI)

http://localhost:8000/docs

### 3. Все запросы требуют API-ключа в заголовке

По умолчанию:
X-API-Key: API_SECRET_KEY
Рекомендуется использовать переменную окружения

### 4. Остановка контейнеров и перезапуск (в случае необходимости)

```bash
docker-compose down -v
docker-compose up --build
```

------------------------------------

#### Дополнительная информация

В проекте используются seeds - тестовые данные загрузятся автоматически при сборке контейнера

- 4 здания
    * Москва, ул. Блюхера, д. 16
    * Москва, ул. Блюхера, д. 2
    * Москва, ул. Карла Маркса, д. 38
    * Москва, ул. Авиационная, д. 32)
- 10 видов деятельности организаций (3 уровня вложения, например: Автомобили -> легковые -> запчасти)
  Еда")
    * Мясная продукция
    * Молочная продукция
    * Автомобили
    * Легковые
    * Грузовые
    * Запчасти
    * Аксессуары
    * Запчасти (грузовые)
    * Аксессуары (грузовые)
- 4 организации
    * ООО "Рога"
    * ООО "Хвост"
    * ОАО "Копыта"
    * ИП "Ухов Глаз Шкурович"
- 6 номеров телефонов (у некоторых организаций несколько номеров)
    от +79990000001 до +79990000006





